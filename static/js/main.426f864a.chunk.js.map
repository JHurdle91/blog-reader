{"version":3,"sources":["services/auth.service.js","services/user.service.js","components/PostListItem.js","components/PostList.js","App.js","components/Navbar.js","components/PostForm.js","components/PostFormButtons.js","components/PostCreate.js","components/Comment.js","components/Comments.js","components/CommentForm.js","components/PostDetail.js","components/PostUpdate.js","components/Login.js","components/Register.js","components/Profile.js","Routes.js","index.js"],"names":["API_AUTH_URL","process","AuthService","register","username","password","axios","post","login","then","response","data","token","localStorage","setItem","JSON","stringify","logout","removeItem","getCurrentUser","parse","getItem","user","API_URL","UserService","getPosts","get","getPost","id","createPost","userId","title","body","published","params","updatePost","postId","deletePost","getComments","deleteComment","commentId","postComment","text","togglePublished","PostListItem","props","history","useHistory","useState","comments","setComments","admin","setAdmin","setPublished","timestamp_formatted","_id","useEffect","result","roles","map","role","push","name","includes","truncated_text","length","substring","className","onClick","onChange","checked","PostList","posts","setPosts","e","preventDefault","key","uniqid","App","Navbar","undefined","currentUser","setCurrentUser","to","PostCreateForm","htmlFor","onChangeTitle","target","value","placeholder","required","onChangeBody","type","PostFormButtons","onClickCancel","onClickSave","onClickSaveAndPublish","PostCreate","setTitle","setBody","createPostAndRedirect","alert","PostForm","Comment","timestamp","commentAuthor","reloadComments","useParams","Comments","comment","CommentForm","setText","handleSubmit","onSubmit","onKeyPress","which","PostDetail","setPost","useCallback","PostUpdate","updatePostAndRedirect","Login","form","useRef","checkBtn","setUsername","setPassword","loading","setLoading","message","setMessage","src","alt","current","validateAll","context","_errors","window","location","reload","error","resMessage","toString","ref","validations","disabled","style","display","vusername","vpassword","Register","successful","setSuccessful","Profile","substr","index","Routes","basename","exact","path","component","document","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.426f864a.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst API_AUTH_URL = `${process.env.REACT_APP_API_URL}/auth`;\n\nconst register = (username, password) => {\n  return axios.post(`${API_AUTH_URL}/signup`, {\n    username,\n    password,\n  });\n};\n\nconst login = (username, password) => {\n  return axios\n    .post(`${API_AUTH_URL}/signin`, {\n      username,\n      password,\n    })\n    .then((response) => {\n      if (response.data.token) {\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\n      }\n      return response.data;\n    });\n};\n\nconst logout = () => {\n  localStorage.removeItem(\"user\");\n};\n\nconst getCurrentUser = () => {\n  const response = JSON.parse(localStorage.getItem(\"user\"));\n  if (response) {\n    const user = response.user;\n    user.token = response.token;\n    return user;\n  }\n  return response;\n};\n\nconst AuthService = {\n  register,\n  login,\n  logout,\n  getCurrentUser,\n};\n\nexport default AuthService;\n","import axios from \"axios\";\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\nconst getPosts = () => {\n  return axios.get(`${API_URL}/posts`);\n};\n\nconst getPost = (id) => {\n  return axios.get(`${API_URL}/posts/${id}`);\n};\n\nconst createPost = (userId, title, body, published) => {\n  return axios.post(`${API_URL}/posts/create`, {\n    params: {\n      userId,\n      title,\n      body,\n      published,\n    },\n  });\n};\n\nconst updatePost = (postId, title, body, published) => {\n  return axios.post(`${API_URL}/posts/${postId}/update`, {\n    params: {\n      title,\n      body,\n      published,\n    },\n  });\n};\n\nconst deletePost = (id) => {\n  return axios.post(`${API_URL}/posts/${id}/delete`);\n};\n\nconst getComments = (postId) => {\n  return axios.get(`${API_URL}/posts/${postId}/comments`);\n};\n\nconst postComment = (postId, userId, text) => {\n  return axios.post(`${API_URL}/posts/${postId}/comments/create`, {\n    params: {\n      postId,\n      userId,\n      text,\n    },\n  });\n};\n\nconst deleteComment = (postId, commentId) => {\n  return axios.post(`${API_URL}/posts/${postId}/comments/${commentId}/delete`);\n};\n\nconst togglePublished = (postId) => {\n  return axios.post(`${API_URL}/posts/${postId}/published`);\n};\n\nconst UserService = {\n  getPosts,\n  getPost,\n  createPost,\n  updatePost,\n  deletePost,\n  getComments,\n  deleteComment,\n  postComment,\n  togglePublished,\n};\n\nexport default UserService;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Switch from \"react-switch\";\n\nimport AuthService from \"../services/auth.service\";\nimport UserService from \"../services/user.service\";\n\nconst PostListItem = (props) => {\n  const history = useHistory();\n\n  const [comments, setComments] = useState([]);\n  const [admin, setAdmin] = useState(false);\n\n  const { post } = props;\n  const [published, setPublished] = useState(post.published);\n  const { title, timestamp_formatted, text, _id } = post;\n\n  useEffect(() => {\n    UserService.getComments(_id).then((result) => {\n      setComments(result.data);\n\n      const user = AuthService.getCurrentUser();\n      if (user) {\n        const roles = [];\n        user.roles.map((role) => roles.push(role.name));\n        setAdmin(roles.includes(\"ROLE_ADMIN\"));\n      }\n    });\n  }, [_id]);\n\n  const handleClick = () => {\n    history.push(`/posts/${_id}`);\n  };\n\n  const handleChange = () => {\n    UserService.togglePublished(_id);\n    setPublished(!published);\n  };\n\n  const CHAR_LIMIT = 100;\n  const truncated_text =\n    text.length >= CHAR_LIMIT ? text.substring(0, CHAR_LIMIT) + \"...\" : text;\n\n  return (\n    <div className=\"PostListItem\">\n      <div onClick={handleClick}>\n        <h2>{title}</h2>\n        <div>{timestamp_formatted}</div>\n        <p>{truncated_text}</p>\n        {comments.length === 1 ? (\n          <div>1 comment</div>\n        ) : (\n          <div>{comments.length} comments</div>\n        )}\n      </div>\n      {admin ? (\n        <label>\n          <Switch onChange={handleChange} checked={published} />\n          <br />\n          <span>{published ? \"Published\" : \"Unpublished\"}</span>\n        </label>\n      ) : (\n        <div></div>\n      )}\n    </div>\n  );\n};\n\nexport default PostListItem;\n","import uniqid from \"uniqid\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport AuthService from \"../services/auth.service\";\nimport UserService from \"../services/user.service\";\nimport PostListItem from \"./PostListItem\";\n\nconst PostList = () => {\n  const history = useHistory();\n\n  const [posts, setPosts] = useState([]);\n  const [admin, setAdmin] = useState(false);\n\n  useEffect(() => {\n    UserService.getPosts().then((response) => {\n      setPosts(response.data);\n    });\n\n    const user = AuthService.getCurrentUser();\n    if (user) {\n      const roles = [];\n      user.roles.map((role) => roles.push(role.name));\n      setAdmin(roles.includes(\"ROLE_ADMIN\"));\n    }\n  }, []);\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    history.push(`/posts/create`);\n  };\n\n  return (\n    <div className=\"PostList\">\n      {admin && (\n        <div>\n          <button className=\"btn btn-primary\" onClick={handleClick}>\n            + New Post\n          </button>\n          <br />\n          <br />\n        </div>\n      )}\n      {posts.map((post) => {\n        if (post.published || admin) {\n          return (\n            <div key={uniqid()}>\n              <PostListItem post={post} />\n              <hr />\n            </div>\n          );\n        } else {\n          return null;\n        }\n      })}\n    </div>\n  );\n};\n\nexport default PostList;\n","import React from \"react\";\n\nimport PostList from \"./components/PostList\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <PostList />\n    </div>\n  );\n};\n\nexport default App;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\n\nimport AuthService from \"../services/auth.service\";\n\nconst Navbar = () => {\n  const history = useHistory();\n\n  const [currentUser, setCurrentUser] = useState(undefined);\n\n  useEffect(() => {\n    const user = AuthService.getCurrentUser();\n    if (user) {\n      const roles = [];\n      user.roles.map((role) => roles.push(role.name));\n      setCurrentUser(user);\n    }\n  }, []);\n\n  const logOut = (e) => {\n    e.preventDefault();\n    AuthService.logout();\n    setCurrentUser(undefined);\n    history.push(\"/login\");\n  };\n\n  return (\n    <div>\n      <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n        <Link to={\"/\"} className=\"navbar-brand\">\n          My Blog\n        </Link>\n        <div className=\"navbar-nav mr-auto\">\n          <li className=\"nav-item\">\n            <Link to={\"/home\"} className=\"nav-link\">\n              Home\n            </Link>\n          </li>\n        </div>\n        {currentUser ? (\n          <div className=\"navbar-nav ml-auto\">\n            <li className=\"nav-item\">\n              <Link to={\"/profile\"} className=\"nav-link\">\n                Profile\n              </Link>\n            </li>\n            <li className=\"nav-item\">\n              <Link to=\"/login\" className=\"nav-link\" onClick={logOut}>\n                Log Out\n              </Link>\n            </li>\n          </div>\n        ) : (\n          <div className=\"navbar-nav ml-auto\">\n            <li className=\"nav-item\">\n              <Link to={\"/login\"} className=\"nav-link\">\n                Log In\n              </Link>\n            </li>\n\n            <li className=\"nav-item\">\n              <Link to={\"/register\"} className=\"nav-link\">\n                Sign Up\n              </Link>\n            </li>\n          </div>\n        )}\n      </nav>\n\n      <div className=\"container mt-3\"></div>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React from \"react\";\n\nconst PostCreateForm = (props) => {\n  const handleChangeTitle = (e) => {\n    e.preventDefault();\n    props.onChangeTitle(e.target.value);\n  };\n\n  const handleChangeBody = (e) => {\n    e.preventDefault();\n    props.onChangeBody(e.target.value);\n  };\n\n  return (\n    <div className=\"PostCreateForm\">\n      <form>\n        <div className=\"form-group\">\n          <label htmlFor=\"titleInput\">Title:</label>\n          <input\n            id=\"titleInput\"\n            name=\"titleInput\"\n            onChange={handleChangeTitle}\n            className=\"form-control\"\n            placeholder=\"Title\"\n            value={props.title}\n            required\n          />\n          <label htmlFor=\"bodyInput\">Post Body:</label>\n          <textarea\n            id=\"commentBox\"\n            name=\"commentBox\"\n            onChange={handleChangeBody}\n            className=\"form-control\"\n            type=\"textarea\"\n            placeholder=\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\"\n            value={props.body}\n            required\n          ></textarea>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PostCreateForm;\n","import React from \"react\";\n\nconst PostFormButtons = (props) => {\n  const handleClickCancel = (e) => {\n    e.preventDefault();\n    props.onClickCancel();\n  };\n\n  const handleClickSave = (e) => {\n    e.preventDefault();\n    props.onClickSave();\n  };\n\n  const handleClickSaveAndPublish = (e) => {\n    e.preventDefault();\n    props.onClickSaveAndPublish();\n  };\n\n  return (\n    <div className=\"PostFormButtons\">\n      <button className=\"btn btn-danger\" onClick={handleClickCancel}>\n        Cancel\n      </button>\n      <br />\n      <button className=\"btn btn-primary\" onClick={handleClickSave}>\n        Save Post (Unpublished)\n      </button>\n      <br />\n      <button className=\"btn btn-primary\" onClick={handleClickSaveAndPublish}>\n        Save and Publish Post\n      </button>\n    </div>\n  );\n};\n\nexport default PostFormButtons;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport PostForm from \"./PostForm\";\nimport PostFormButtons from \"./PostFormButtons\";\nimport AuthService from \"../services/auth.service\";\nimport UserService from \"../services/user.service\";\n\nconst PostCreate = () => {\n  const history = useHistory();\n\n  const [admin, setAdmin] = useState(false);\n  const [currentUser, setCurrentUser] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n\n  useEffect(() => {\n    const user = AuthService.getCurrentUser();\n    if (user) {\n      const roles = [];\n      user.roles.map((role) => roles.push(role.name));\n      setAdmin(roles.includes(\"ROLE_ADMIN\"));\n      setCurrentUser(user);\n    }\n  }, []);\n\n  const handleChangeTitle = (value) => {\n    setTitle(value);\n  };\n\n  const handleChangeBody = (value) => {\n    setBody(value);\n  };\n\n  const handleClickCancel = (e) => {\n    history.push(\"/posts/\");\n  };\n\n  const handleClickSave = () => {\n    const published = false;\n    createPostAndRedirect(published);\n  };\n\n  const handleClickSaveAndPublish = () => {\n    const published = true;\n    createPostAndRedirect(published);\n  };\n\n  const createPostAndRedirect = (published) => {\n    if (title && body) {\n      UserService.createPost(currentUser._id, title, body, published).then(\n        (response) => {\n          const postId = response.data._id;\n          history.push(`/posts/${postId}`);\n        }\n      );\n    } else {\n      alert(\"Title and Body are required.\");\n    }\n  };\n\n  return (\n    <div className=\"PostCreate\">\n      <h1>New Post</h1>\n      <hr />\n      {admin ? (\n        <div>\n          <PostForm\n            onChangeTitle={handleChangeTitle}\n            onChangeBody={handleChangeBody}\n          />\n          <br />\n          <PostFormButtons\n            onClickCancel={handleClickCancel}\n            onClickSave={handleClickSave}\n            onClickSaveAndPublish={handleClickSaveAndPublish}\n          />\n        </div>\n      ) : (\n        <div>Only the Admin can create new posts at this time...</div>\n      )}\n    </div>\n  );\n};\n\nexport default PostCreate;\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport UserService from \"../services/user.service\";\n\nconst Comment = (props) => {\n  const { timestamp, text, commentAuthor, currentUser, admin, reloadComments } =\n    props;\n  const commentId = props.id;\n  const { postId } = useParams();\n\n  const handleClick = () => {\n    UserService.deleteComment(postId, commentId).then(() => {\n      reloadComments();\n    });\n  };\n\n  return (\n    <div className=\"Comment\">\n      <div>\n        <strong>{commentAuthor.username}</strong>\n      </div>\n      <div>{timestamp}</div>\n      <br />\n      <div>{text}</div>\n      {currentUser && (currentUser._id === commentAuthor._id || admin) ? (\n        <button className=\"btn btn-danger\" onClick={handleClick}>\n          Delete Comment\n        </button>\n      ) : (\n        <div></div>\n      )}\n    </div>\n  );\n};\n\nexport default Comment;\n","import React from \"react\";\nimport uniqid from \"uniqid\";\n\nimport Comment from \"./Comment\";\n\nconst Comments = (props) => {\n  const { comments, reloadComments } = props;\n\n  return (\n    <div className=\"Comments\">\n      {comments.map((comment) => {\n        const { timestamp_formatted, text, user, _id } = comment;\n        const { currentUser, admin } = props;\n        return (\n          <div key={uniqid()}>\n            <Comment\n              id={_id}\n              timestamp={timestamp_formatted}\n              text={text}\n              commentAuthor={user}\n              currentUser={currentUser}\n              admin={admin}\n              reloadComments={reloadComments}\n            />\n            <hr />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Comments;\n","import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport AuthService from \"../services/auth.service\";\nimport UserService from \"../services/user.service\";\n\nconst CommentForm = (props) => {\n  const [text, setText] = useState(\"\");\n  const [currentUser, setCurrentUser] = useState(undefined);\n\n  const { postId } = useParams();\n\n  useEffect(() => {\n    const user = AuthService.getCurrentUser();\n    if (user) setCurrentUser(user);\n  }, []);\n\n  const onChangeText = (e) => {\n    const text = e.target.value;\n    setText(text);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    UserService.postComment(postId, currentUser.id, text).then(() => {\n      props.reloadComments();\n      setText(\"\");\n    });\n  };\n\n  const handleKeyPress = (e) => {\n    // trigger by pressing \"enter\"\n    if (e.which === 13) {\n      handleSubmit(e);\n    }\n  };\n\n  return (\n    <div className=\"CommentForm\">\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"commentBox\">Leave a comment:</label>\n          <br />\n          <textarea\n            id=\"commentBox\"\n            name=\"commentBox\"\n            onChange={onChangeText}\n            className=\"form-control\"\n            type=\"textarea\"\n            placeholder=\"What an excellent post!\"\n            value={text}\n            onKeyPress={handleKeyPress}\n            required\n          ></textarea>\n        </div>\n        <button className=\"btn btn-primary\" type=\"submit\">\n          Submit\n        </button>\n        <br />\n        <br />\n      </form>\n    </div>\n  );\n};\n\nexport default CommentForm;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useHistory, Link } from \"react-router-dom\";\nimport Switch from \"react-switch\";\n\nimport Comments from \"./Comments\";\nimport CommentForm from \"./CommentForm\";\nimport AuthService from \"../services/auth.service\";\nimport UserService from \"../services/user.service\";\n\nconst PostDetail = () => {\n  const history = useHistory();\n  const { postId } = useParams();\n\n  const [admin, setAdmin] = useState(false);\n  const [currentUser, setCurrentUser] = useState(undefined);\n  const [post, setPost] = useState({\n    title: \"\",\n    timestamp: \"\",\n    timestamp_formatted: \"\",\n    text: \"\",\n    published: false,\n    user: {\n      username: \"\",\n      password: \"\",\n    },\n  });\n\n  useEffect(() => {\n    UserService.getPost(postId).then((response) => {\n      setPost(response.data);\n    });\n\n    const user = AuthService.getCurrentUser();\n    if (user) {\n      const roles = [];\n      user.roles.map((role) => roles.push(role.name));\n      setAdmin(roles.includes(\"ROLE_ADMIN\"));\n      setCurrentUser(user);\n    }\n  }, [postId]);\n\n  const [published, setPublished] = useState(post.published);\n  useEffect(() => {\n    setPublished(post.published);\n  }, [post.published]);\n\n  const [comments, setComments] = useState([]);\n  const reloadComments = useCallback(() => {\n    UserService.getComments(postId).then((response) => {\n      setComments(response.data);\n    });\n  }, [postId]);\n\n  useEffect(() => {\n    reloadComments();\n  }, [reloadComments]);\n\n  const handleChange = () => {\n    UserService.togglePublished(postId);\n    setPublished(!published);\n  };\n\n  const handleClickEdit = () => {\n    history.push(`/posts/${postId}/edit`);\n  };\n\n  const handleClickDelete = () => {\n    UserService.deletePost(postId).then(() => {\n      history.push(`/posts/`);\n    });\n  };\n\n  let { title, timestamp_formatted, text, user } = post;\n\n  return (\n    <div className=\"PostDetail\">\n      <h1>{title}</h1>\n      <div>- {user.username}</div>\n      <div>{timestamp_formatted}</div>\n      {admin ? (\n        <div>\n          <label>\n            <Switch onChange={handleChange} checked={published} />\n            <br />\n            <span>{published ? \"Published\" : \"Unpublished\"}</span>\n          </label>\n          <br />\n          <button className=\"btn btn-warning\" onClick={handleClickEdit}>\n            Edit Post\n          </button>\n          <br />\n          <button className=\"btn btn-danger\" onClick={handleClickDelete}>\n            Delete Post\n          </button>\n        </div>\n      ) : (\n        <div></div>\n      )}\n      <hr />\n      <div>{text}</div>\n      <hr />\n      <h2>Comments</h2>\n      {currentUser ? (\n        <CommentForm reloadComments={reloadComments} />\n      ) : (\n        <div>\n          <br />\n          <Link to={\"/login\"}>\n            <strong>Log in</strong>\n          </Link>{\" \"}\n          to leave a comment.\n          <br />\n          <br />\n        </div>\n      )}\n      <Comments\n        currentUser={currentUser}\n        admin={admin}\n        comments={comments}\n        reloadComments={reloadComments}\n      />\n    </div>\n  );\n};\n\nexport default PostDetail;\n","import React, { useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nimport PostForm from \"./PostForm\";\nimport PostFormButtons from \"./PostFormButtons\";\nimport AuthService from \"../services/auth.service\";\nimport UserService from \"../services/user.service\";\n\nconst PostUpdate = () => {\n  const { postId } = useParams();\n  const history = useHistory();\n\n  const [admin, setAdmin] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [post, setPost] = useState({\n    title: \"\",\n    timestamp: \"\",\n    timestamp_formatted: \"\",\n    text: \"\",\n    published: false,\n    user: {\n      username: \"\",\n      password: \"\",\n    },\n  });\n\n  useEffect(() => {\n    UserService.getPost(postId).then((response) => {\n      setPost(response.data);\n    });\n  }, [postId]);\n\n  useEffect(() => {\n    setTitle(post.title);\n    setBody(post.text);\n  }, [post]);\n\n  useEffect(() => {\n    const user = AuthService.getCurrentUser();\n    if (user) {\n      const roles = [];\n      user.roles.map((role) => roles.push(role.name));\n      setAdmin(roles.includes(\"ROLE_ADMIN\"));\n    }\n  }, []);\n\n  const handleChangeTitle = (value) => {\n    setTitle(value);\n  };\n\n  const handleChangeBody = (value) => {\n    setBody(value);\n  };\n\n  const handleClickCancel = () => {\n    history.push(`/posts/${postId}`);\n  };\n\n  const handleClickSave = () => {\n    const published = false;\n    updatePostAndRedirect(published);\n  };\n\n  const handleClickSaveAndPublish = () => {\n    const published = true;\n    updatePostAndRedirect(published);\n  };\n\n  const updatePostAndRedirect = (published) => {\n    if (title && body) {\n      UserService.updatePost(postId, title, body, published).then(() => {\n        history.push(`/posts/${postId}`);\n      });\n    } else {\n      alert(\"Title and Body are required.\");\n    }\n  };\n\n  return (\n    <div className=\"PostUpdate\">\n      <h1>Update Post</h1>\n      <hr />\n      {admin ? (\n        <div>\n          <PostForm\n            title={title}\n            body={body}\n            onChangeTitle={handleChangeTitle}\n            onChangeBody={handleChangeBody}\n          />\n          <br />\n          <PostFormButtons\n            onClickCancel={handleClickCancel}\n            onClickSave={handleClickSave}\n            onClickSaveAndPublish={handleClickSaveAndPublish}\n          />\n        </div>\n      ) : (\n        <div>Only the Admin can update posts at this time...</div>\n      )}\n    </div>\n  );\n};\n\nexport default PostUpdate;\n","import React, { useState, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\n\nimport AuthService from \"../services/auth.service\";\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        This field is required!\n      </div>\n    );\n  }\n};\n\nconst Login = () => {\n  const form = useRef();\n  const checkBtn = useRef();\n  const history = useHistory();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n\n  const onChangeUsername = (e) => {\n    const username = e.target.value;\n    setUsername(username);\n  };\n\n  const onChangePassword = (e) => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n\n    setMessage(\"\");\n    setLoading(true);\n\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      AuthService.login(username, password).then(\n        () => {\n          history.push(\"/profile\");\n          window.location.reload();\n        },\n        (error) => {\n          const resMessage =\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString();\n\n          setLoading(false);\n          setMessage(resMessage);\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"col-md-12\">\n      <div className=\"card card-container\">\n        <img\n          src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n          alt=\"profile-img\"\n          className=\"profile-img-card\"\n        />\n\n        <Form onSubmit={handleLogin} ref={form}>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <Input\n              type=\"text\"\n              className=\"form-control\"\n              name=\"username\"\n              value={username}\n              onChange={onChangeUsername}\n              validations={[required]}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <Input\n              type=\"password\"\n              className=\"form-control\"\n              name=\"password\"\n              value={password}\n              onChange={onChangePassword}\n              validations={[required]}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <button className=\"btn btn-primary btn-block\" disabled={loading}>\n              {loading && (\n                <span className=\"spinner-border spinner-border-sm\"></span>\n              )}\n              <span>Login</span>\n            </button>\n          </div>\n\n          {message && (\n            <div className=\"form-group\">\n              <div className=\"alert alert-danger\" role=\"alert\">\n                {message}\n              </div>\n            </div>\n          )}\n          <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\n\nimport AuthService from \"../services/auth.service\";\n\nconst required = (value) => {\n  if (!value) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        This field is required!\n      </div>\n    );\n  }\n};\n\nconst vusername = (value) => {\n  if (value.length < 3 || value.length > 20) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        The username must be between 3 and 20 characters.\n      </div>\n    );\n  }\n};\n\nconst vpassword = (value) => {\n  if (value.length < 6 || value.length > 40) {\n    return (\n      <div className=\"alert alert-danger\" role=\"alert\">\n        The password must be between 6 and 40 characters.\n      </div>\n    );\n  }\n};\n\nconst Register = (props) => {\n  const form = useRef();\n  const checkBtn = useRef();\n  const history = useHistory();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [successful, setSuccessful] = useState(false);\n  const [message, setMessage] = useState(\"\");\n\n  const onChangeUsername = (e) => {\n    const username = e.target.value;\n    setUsername(username);\n  };\n\n  const onChangePassword = (e) => {\n    const password = e.target.value;\n    setPassword(password);\n  };\n\n  const handleRegister = (e) => {\n    e.preventDefault();\n\n    setMessage(\"\");\n    setLoading(true);\n    setSuccessful(false);\n\n    form.current.validateAll();\n\n    if (checkBtn.current.context._errors.length === 0) {\n      AuthService.register(username, password).then(\n        (response) => {\n          setMessage(response.data.message);\n          setSuccessful(true);\n          AuthService.login(username, password).then(() => {\n            history.push(\"/profile\");\n            window.location.reload();\n          });\n        },\n        (error) => {\n          const resMessage =\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString();\n\n          setMessage(resMessage);\n          setLoading(false);\n          setSuccessful(false);\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"col-md-12\">\n      <div className=\"card card-container\">\n        <img\n          src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n          alt=\"profile-img\"\n          className=\"profile-img-card\"\n        />\n\n        <Form onSubmit={handleRegister} ref={form}>\n          {!successful && (\n            <div>\n              <div className=\"form-group\">\n                <label htmlFor=\"username\">Username</label>\n                <Input\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"username\"\n                  value={username}\n                  onChange={onChangeUsername}\n                  validations={[required, vusername]}\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Password</label>\n                <Input\n                  type=\"password\"\n                  className=\"form-control\"\n                  name=\"password\"\n                  value={password}\n                  onChange={onChangePassword}\n                  validations={[required, vpassword]}\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <button\n                  className=\"btn btn-primary btn-block\"\n                  disabled={loading}\n                >\n                  {loading && (\n                    <span className=\"spinner-border spinner-border-sm\"></span>\n                  )}\n                  <span>Sign Up</span>\n                </button>\n              </div>\n            </div>\n          )}\n\n          {message && (\n            <div className=\"form-group\">\n              <div\n                className={\n                  successful ? \"alert alert-success\" : \"alert alert-danger\"\n                }\n                role=\"alert\"\n              >\n                {message}\n              </div>\n            </div>\n          )}\n          <CheckButton style={{ display: \"none\" }} ref={checkBtn} />\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","import React from \"react\";\nimport AuthService from \"../services/auth.service\";\n\nconst Profile = () => {\n  const currentUser = AuthService.getCurrentUser();\n\n  return (\n    <div className=\"container\">\n      <header className=\"jumbotron\">\n        <h3>\n          <strong>{currentUser.username}</strong> Profile\n        </h3>\n      </header>\n      <p>\n        <strong>Token:</strong> {currentUser.token.substring(0, 20)} ...{\" \"}\n        {currentUser.token.substr(currentUser.token.length - 20)}\n      </p>\n      <p>\n        <strong>Id:</strong> {currentUser.id}\n      </p>\n      <strong>Authorities:</strong>\n      <ul>\n        {currentUser.roles &&\n          currentUser.roles.map((role, index) => (\n            <li key={index}>{role.name}</li>\n          ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Profile;\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\n\nimport App from \"./App\";\nimport Navbar from \"./components/Navbar\";\nimport PostCreate from \"./components/PostCreate\";\nimport PostDetail from \"./components/PostDetail\";\nimport PostUpdate from \"./components/PostUpdate\";\nimport Login from \"./components/Login\";\nimport Register from \"./components/Register\";\nimport Profile from \"./components/Profile\";\n\nconst PUBLIC_URL = process.env.REACT_APP_PUBLIC_URL;\n\nconst Routes = () => {\n  const posts = \"/posts\";\n  const login = \"/login\";\n  const register = \"/register\";\n  const profile = \"/profile\";\n\n  return (\n    <BrowserRouter basename={PUBLIC_URL}>\n      <Navbar />\n      <Switch>\n        <Route exact path={[\"/\", \"/home\"]} component={App} />\n        <Route exact path={posts} component={App} />\n        <Route path={`${posts}/create`} component={PostCreate} />\n        <Route path={`${posts}/:postId/edit`} component={PostUpdate} />\n        <Route path={`${posts}/:postId`} component={PostDetail} />\n        <Route exact path={login} component={Login} />\n        <Route exact path={register} component={Register} />\n        <Route exact path={profile} component={Profile} />\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default Routes;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Routes from \"./Routes\";\n\ndocument.title = \"Blog Reader\";\nReactDOM.render(\n  <React.StrictMode>\n    <Routes />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}